<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Admin Page</title>
    <link rel="stylesheet" href="/css/favourites.css">
    <link rel="stylesheet" href="/css/book-list.css">
    <link rel="stylesheet" href="/css/admin.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
          integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<header th:replace="frame :: header"></header>
<nav>
    <ul class="nav__list">
        <li class="nav__item" data-tooltip="Home">
            <a href="/books/search">
                <i class='bx bx-home-alt'></i>
            </a>
        </li>
        <li class="nav__item" data-tooltip="Total-book">
            <a href="/admin/total-book">
                <i class='bx bx-book'></i>
            </a>
        </li>
        <li class="nav__item" data-tooltip="Total-borrow">
            <a href="/admin/total-borrow">
                <i class='bx bx-book-add' ></i>
            </a>
        </li>
        <li class="nav__item" data-tooltip="Total-user">
            <a href="/admin/total-user">
                <i class='bx bxs-user-rectangle' ></i>
            </a>
        </li>
       <br><br><br>
        <li class="nav__item" data-tooltip="Account">
            <a href="/users/profile">
                <i class='bx bx-user-circle'></i>
            </a>
        </li>
        <li class="nav__item" data-tooltip="Logout">
            <a href="/logout">
                <i class='bx bx-log-out'></i>
            </a>
        </li>
    </ul>
    <div th:replace="chat :: body"></div>
    <script>
        // JavaScript code to handle toggle
        const chatButton = document.querySelector('.nav__item[data-tooltip="Chat"]');
        const chatContainer = document.querySelector('.chat-container');

        chatButton.addEventListener('click', () => {
            chatContainer.classList.toggle('active');
        });
    </script>

</nav>
<div class="main-content">
    <section>
        <div class="card-container">
            <div class="card">
                <div class="content">
                    <p class="number">30</p>
                    <p class="label">Total books</p>
                </div>
                <button class="btn">Click</button>
            </div>
            <div class="card">
                <div class="content">
                    <p class="number">30</p>
                    <p class="label">Total users</p>
                </div>
                <button class="btn">Click</button>
            </div>
            <div class="card">
                <div class="content">
                    <p class="number">30</p>
                    <p class="label">Total admin</p>
                </div>
                <button class="btn">Click</button>
            </div>
            <div class="card">
                <div class="content">
                    <p class="number">30</p>
                    <p class="label">Total borrow</p>
                </div>
                <button class="btn">Click</button>
            </div>
            <script>
                const buttons = document.querySelectorAll('.btn');

                buttons.forEach((button) => {
                    button.addEventListener('click', () => {
                        alert('Button clicked!');
                    });
                });
            </script>
        </div>
    </section>
    <section style="display:grid; grid-template-columns: 1fr 1fr 2.5fr;" class="display-main">
        <div>
            <img src="/avatar/${admin.username}" alt="Admin Avatar">
        </div>
        <div>
            <p><i>Username:</i><br> ${admin.username}</p>
            <p><i>Email:</i><br> ${admin.email}</p>
            <p><i>Phone:</i><br> ${admin.phone}</p>
            <p><i>Address:</i><br> ${admin.address}</p>
        </div>
        <div class="chart-container" style="width: 80%; margin: auto; text-align: center;">
            <h1>Books Borrowed Per Month</h1>
            <canvas id="borrowChart" width="400" height="200"></canvas>
        </div>
        <script>
            // Dữ liệu từ Thymeleaf
            const labels = /*[[${months}]]*/ ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
            const data = /*[[${borrowCounts}]]*/ [70, 50, 90, 60, 80, 40, 100, 65, 75, 85, 95, 60];

            // Tạo biểu đồ bằng Chart.js
            const ctx = document.getElementById('borrowChart').getContext('2d');
            const borrowChart = new Chart(ctx, {
                type: 'bar', // Loại biểu đồ
                data: {
                    labels: labels, // Tháng
                    datasets: [{
                        label: 'Number of Books Borrowed',
                        data: data, // Số liệu
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true // Bắt đầu từ 0
                        }
                    }
                }
            });
        </script>
    </section>
</div>
</body>
</html>
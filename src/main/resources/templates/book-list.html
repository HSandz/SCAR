<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Book Search Results</title>
    <link rel="stylesheet" type="text/css" href="/css/book-list.css">
</head>
<body>
<h1>Book Search Results</h1>

<!-- Search form -->
<form th:action="@{/books/search}" method="get">
    <input type="text" name="query" placeholder="Search for books..." required />
    <button type="submit">Search</button>
</form>

<!-- Book results -->
<div th:if="${not #lists.isEmpty(books)}">
    <h2>Found Books:</h2>
    <ul>
        <li th:each="book : ${books}">
            <div class="book-item">
                <!-- Book image -->
                <img th:src="${book.imageUrl}" alt="Book Cover" class="book-cover" />

                <!-- Book details -->
                <div class="book-details">
                    <h3 th:text="${book.title}">Book Title</h3>
                    <p><strong>ISBN:</strong> <span th:text="${book.isbn}">ISBN</span></p>
                    <p><strong>Language:</strong> <span th:text="${book.language}">Language</span></p>
                    <p><strong>Rating:</strong> <span th:text="${book.rating}">Rating</span></p>
                    <p><strong>Publication Year:</strong> <span th:text="${book.publicationYear}">Publication Year</span></p>
                    <p><strong>Description:</strong> <span th:text="${book.description}">Description</span></p>

                    <!-- Display authors, genres, publishers, and users if available -->
                    <p><strong>Authors:</strong>
                        <span class="tag" th:each="author : ${book.authors}" th:text="${author.name}">Author Name</span>
                    </p>
                    <p><strong>Genres:</strong>
                        <span class="tag" th:each="genre : ${book.genres}" th:text="${genre.name}">Genre Name</span>
                    </p>
                    <p><strong>Publishers:</strong>
                        <span class="tag" th:each="publisher : ${book.publishers}" th:text="${publisher.name}">Publisher Name</span>
                    </p>
                    <p><strong>Users:</strong>
                        <span class="tag" th:each="user : ${book.users}" th:text="${user.name}">User Name</span>
                    </p>
                </div>
            </div>
            <hr />
        </li>
    </ul>
</div>

<!-- Pagination -->
<div class="pagination" th:if="${totalPages > 1}">
    <a th:href="@{/books/search(query=${query}, page=${currentPage - 1})}" th:if="${currentPage > 0}">Previous</a>
    <span>Page <span th:text="${currentPage + 1}">1</span> of <span th:text="${totalPages}">1</span></span>
    <a th:href="@{/books/search(query=${query}, page=${currentPage + 1})}" th:if="${currentPage + 1 < totalPages}">Next</a>
</div>

<!-- Message for no books found -->
<div th:if="${#lists.isEmpty(books)}" class="empty-message">
    <p>No books found. Please try a different query.</p>
</div>
</body>
</html>
